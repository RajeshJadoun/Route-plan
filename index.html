<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Marketing Team Check-in/Check-out</title>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <style>
        /* ... CSS styles ... */
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìç Marketing Team</h1>
            <p>Check-in/Check-out System</p>
        </div>

        <div class="content">
            <div id="loginSection" class="login-section">
                <h2>üîê Login with Google</h2>
                <p style="margin: 20px 0; color: #666;">Please login with your authorized Gmail account</p>
                <div id="g_id_onload"
                     data-client_id="206259846250-cbhaai1sf0f6abcfgk7g64iukecbs18p.apps.googleusercontent.com"
                     data-context="signin"
                     data-ux_mode="popup"
                     data-callback="handleCredentialResponse"
                     data-auto_prompt="false">
                </div>
                <div class="g_id_signin"
                     data-type="standard"
                     data-shape="pill"
                     data-theme="filled_blue"
                     data-text="signin_with"
                     data-size="large"
                     data-logo_alignment="left">
                </div>
            </div>

            <div id="appSection" class="hidden">
                <div class="user-info">
                    <div class="welcome-text">
                        Welcome, <span id="userName">User</span>! üëã
                    </div>
                    <button class="logout-btn" onclick="logout()">Logout</button>
                </div>

                <div class="route-plan">
                    <h3>üìã Today's Route Plan</h3>
                    <p id="routePlanText">Loading...</p>
                </div>

                <div class="action-buttons">
                    <button class="btn btn-checkin" onclick="startCheckin()">
                        üü¢ Check-in
                    </button>
                    <button class="btn btn-checkout" onclick="startCheckout()">
                        üî¥ Check-out
                    </button>
                </div>

                <div id="checkinForm" class="form-section hidden">
                    <h3>üü¢ Check-in Process</h3>
                    
                    <div class="form-group">
                        <label for="customRoutePlan">Route Plan (if different from above):</label>
                        <textarea id="customRoutePlan" placeholder="Enter custom route plan if needed..." rows="3"></textarea>
                    </div>

                    <div class="camera-section">
                        <label>üì∏ Meter Reading Photo (Required):</label>
                        <br>
                        <button class="camera-btn" onclick="capturePhoto('meterIn')">
                            üì∑ Capture Meter Reading
                        </button>
                        <br>
                        <img id="meterInPreview" class="photo-preview hidden" alt="Meter Reading Preview">
                    </div>

                    <button class="submit-btn" onclick="submitCheckin()" id="checkinSubmitBtn">
                        Submit Check-in
                    </button>
                </div>

                <div id="checkoutForm" class="form-section hidden">
                    <h3>üî¥ Check-out Process</h3>
                    
                    <div class="form-group">
                        <label>üöó Transportation Method:</label>
                        <div class="transport-options">
                            <div class="transport-option" onclick="selectTransport('local')" id="localTransport">
                                <strong>Local Vehicle</strong><br>
                                <small>Meter Reading Required</small>
                            </div>
                            <div class="transport-option" onclick="selectTransport('public')" id="publicTransport">
                                <strong>Public Transport</strong><br>
                                <small>Ticket Photo Required</small>
                            </div>
                        </div>
                    </div>

                    <div id="localVehicleSection" class="camera-section hidden">
                        <label>üì∏ Meter Out Reading:</label>
                        <br>
                        <button class="camera-btn" onclick="capturePhoto('meterOut')">
                            üì∑ Capture Meter Out
                        </button>
                        <br>
                        <img id="meterOutPreview" class="photo-preview hidden" alt="Meter Out Preview">
                    </div>

                    <div id="publicTransportSection" class="camera-section hidden">
                        <label>üì∏ Travel Ticket Photo:</label>
                        <br>
                        <button class="camera-btn" onclick="capturePhoto('ticket')">
                            üé´ Capture Ticket
                        </button>
                        <br>
                        <img id="ticketPreview" class="photo-preview hidden" alt="Ticket Preview">
                    </div>

                    <div class="form-group">
                        <label>üí∞ Expense Details:</label>
                        <div class="expense-form">
                            <div class="form-group">
                                <label for="travelExpense">Travel (‚Çπ):</label>
                                <input type="number" id="travelExpense" placeholder="0" min="0" step="0.01">
                            </div>
                            <div class="form-group">
                                <label for="foodExpense">Food (‚Çπ):</label>
                                <input type="number" id="foodExpense" placeholder="0" min="0" step="0.01">
                            </div>
                            <div class="form-group">
                                <label for="stayExpense">Stay (‚Çπ):</label>
                                <input type="number" id="stayExpense" placeholder="0" min="0" step="0.01">
                            </div>
                            <div class="form-group">
                                <label for="otherExpense">Other (‚Çπ):</label>
                                <input type="number" id="otherExpense" placeholder="0" min="0" step="0.01">
                            </div>
                        </div>
                    </div>

                    <button class="submit-btn" onclick="submitCheckout()" id="checkoutSubmitBtn">
                        Submit Check-out
                    </button>
                </div>
            </div>

            <div id="alertContainer"></div>
        </div>
    </div>

    <input type="file" id="cameraInput" accept="image/*" capture="environment" style="display: none;">

    <script>
        // Global variables (‡§µ‡•à‡§∂‡•ç‡§µ‡§ø‡§ï ‡§ö‡§∞)
        let currentUser = null;
        let userCredential = null;
        let currentPhotoType = null;
        let transportMethod = null;
        let capturedPhotos = {};

        // Google Apps Script Web App URL (Google Apps Script Web App URL)
        const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbwMPjHPJ9Su9Kz8uNoUsVjUrqGSwd-zIvLc4qVWXuVAWYMDsF-3w5RdGF4WgG-jp8eIu/exec';

        // Initialize Google Sign-In (Google ‡§∏‡§æ‡§á‡§®-‡§á‡§® ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•á‡§Ç)
        window.addEventListener('load', function() {
            if (typeof google !== 'undefined') {
                google.accounts.id.initialize({
                    client_id: '206259846250-cbhaai1sf0f6abcfgk7g64iukecbs18p.apps.googleusercontent.com', // Replace with your Client ID (‡§á‡§∏‡•á ‡§Ö‡§™‡§®‡•Ä Client ID ‡§∏‡•á ‡§¨‡§¶‡§≤‡•á‡§Ç)
                    callback: handleCredentialResponse
                });
            }
        });

        /**
         * Handle Google Sign-In response (Google ‡§∏‡§æ‡§á‡§®-‡§á‡§® ‡§™‡•ç‡§∞‡§§‡§ø‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ ‡§ï‡•ã ‡§∏‡§Ç‡§≠‡§æ‡§≤‡•á‡§Ç)
         */
        function handleCredentialResponse(response) {
            showLoading('Verifying credentials...');
            
            userCredential = response.credential;
            
            // Decode JWT to get user info (‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ ‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§™‡§æ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è JWT ‡§ï‡•ã ‡§°‡§ø‡§ï‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç)
            try {
                const payload = JSON.parse(atob(response.credential.split('.')[1]));
                currentUser = {
                    email: payload.email,
                    name: payload.name,
                    picture: payload.picture
                };

                // Verify with backend (‡§¨‡•à‡§ï‡§è‡§Ç‡§° ‡§ï‡•á ‡§∏‡§æ‡§• ‡§∏‡§§‡•ç‡§Ø‡§æ‡§™‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç)
                verifyUserAuthorization();
            } catch (error) {
                showAlert('Login failed: Invalid token', 'error');
                hideLoading();
            }
        }

        /**
         * Verify user authorization with backend (‡§¨‡•à‡§ï‡§è‡§Ç‡§° ‡§ï‡•á ‡§∏‡§æ‡§• ‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ ‡§™‡•ç‡§∞‡§æ‡§ß‡§ø‡§ï‡§∞‡§£ ‡§ï‡•ã ‡§∏‡§§‡•ç‡§Ø‡§æ‡§™‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç)
         */
        async function verifyUserAuthorization() {
            try {
                const response = await fetch(`${SCRIPT_URL}?action=getUserInfo&email=${currentUser.email}`);
                const result = await response.json();

                hideLoading();

                if (result.status === 200) {
                    // User is authorized (‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ ‡§Ö‡§ß‡§ø‡§ï‡•É‡§§ ‡§π‡•à)
                    currentUser.displayName = result.data.name || currentUser.name;
                    currentUser.routePlan = result.data.routePlan;
                    
                    showMainApp();
                    showAlert('Login successful! Welcome back.', 'success');
                } else {
                    showAlert('Access denied: You are not authorized to use this application.', 'error');
                }
            } catch (error) {
                hideLoading();
                showAlert('Login verification failed: ' + error.message, 'error');
            }
        }

        /**
         * Show main application (‡§Æ‡•Å‡§ñ‡•ç‡§Ø ‡§è‡§™‡•ç‡§≤‡§ø‡§ï‡•á‡§∂‡§® ‡§¶‡§ø‡§ñ‡§æ‡§è‡§Ç)
         */
        function showMainApp() {
            document.getElementById('loginSection').classList.add('hidden');
            document.getElementById('appSection').classList.remove('hidden');
            
            // Update user info (‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ ‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§Ö‡§™‡§°‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç)
            document.getElementById('userName').textContent = currentUser.displayName;
            document.getElementById('routePlanText').textContent = currentUser.routePlan;
        }

        /**
         * Start check-in process (‡§ö‡•á‡§ï-‡§á‡§® ‡§™‡•ç‡§∞‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•á‡§Ç)
         */
        function startCheckin() {
            hideAllForms();
            document.getElementById('checkinForm').classList.remove('hidden');
            
            // Pre-fill route plan if available (‡§Ø‡§¶‡§ø ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§π‡•ã ‡§§‡•ã ‡§∞‡•Ç‡§ü ‡§™‡•ç‡§≤‡§æ‡§® ‡§™‡§π‡§≤‡•á ‡§∏‡•á ‡§≠‡§∞‡•á‡§Ç)
            if (currentUser.routePlan && currentUser.routePlan !== 'No Route Plan assigned.') {
                document.getElementById('customRoutePlan').placeholder = `Current: ${currentUser.routePlan}`;
            }
        }

        /**
         * Start check-out process (‡§ö‡•á‡§ï-‡§Ü‡§â‡§ü ‡§™‡•ç‡§∞‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•á‡§Ç)
         */
        function startCheckout() {
            hideAllForms();
            document.getElementById('checkoutForm').classList.remove('hidden');
            transportMethod = null;
            
            // Reset transport selection (‡§™‡§∞‡§ø‡§µ‡§π‡§® ‡§ö‡§Ø‡§® ‡§∞‡•Ä‡§∏‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç)
            document.getElementById('localTransport').classList.remove('selected');
            document.getElementById('publicTransport').classList.remove('selected');
            document.getElementById('localVehicleSection').classList.add('hidden');
            document.getElementById('publicTransportSection').classList.add('hidden');
        }

        /**
         * Select transport method (‡§™‡§∞‡§ø‡§µ‡§π‡§® ‡§µ‡§ø‡§ß‡§ø ‡§ö‡•Å‡§®‡•á‡§Ç)
         */
        function selectTransport(method) {
            transportMethod = method;
            
            // Update UI (UI ‡§Ö‡§™‡§°‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç)
            document.getElementById('localTransport').classList.remove('selected');
            document.getElementById('publicTransport').classList.remove('selected');
            document.getElementById('localVehicleSection').classList.add('hidden');
            document.getElementById('publicTransportSection').classList.add('hidden');

            if (method === 'local') {
                document.getElementById('localTransport').classList.add('selected');
                document.getElementById('localVehicleSection').classList.remove('hidden');
            } else if (method === 'public') {
                document.getElementById('publicTransport').classList.add('selected');
                document.getElementById('publicTransportSection').classList.remove('hidden');
            }
        }

        /**
         * Capture photo using camera (‡§ï‡•à‡§Æ‡§∞‡§æ ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡§ï‡•á ‡§´‡•ã‡§ü‡•ã ‡§ï‡•à‡§™‡•ç‡§ö‡§∞ ‡§ï‡§∞‡•á‡§Ç)
         */
        function capturePhoto(type) {
            currentPhotoType = type;
            document.getElementById('cameraInput').click();
        }

        // Handle photo capture (‡§´‡•ã‡§ü‡•ã ‡§ï‡•à‡§™‡•ç‡§ö‡§∞ ‡§ï‡•ã ‡§∏‡§Ç‡§≠‡§æ‡§≤‡•á‡§Ç)
        document.getElementById('cameraInput').addEventListener('change', function(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const base64Data = e.target.result;
                    capturedPhotos[currentPhotoType] = base64Data;
                    
                    // Show preview (‡§™‡•Ç‡§∞‡•ç‡§µ‡§æ‡§µ‡§≤‡•ã‡§ï‡§® ‡§¶‡§ø‡§ñ‡§æ‡§è‡§Ç)
                    const previewId = currentPhotoType + 'Preview';
                    const previewImg = document.getElementById(previewId);
                    if (previewImg) {
                        previewImg.src = base64Data;
                        previewImg.classList.remove('hidden');
                    }
                    
                    showAlert(`üì∏ ${currentPhotoType} photo captured successfully!`, 'success');
                };
                reader.readAsDataURL(file);
            }
        });

        /**
         * Submit check-in data (‡§ö‡•á‡§ï-‡§á‡§® ‡§°‡•á‡§ü‡§æ ‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§ï‡§∞‡•á‡§Ç)
         */
        async function submitCheckin() {
            if (!capturedPhotos.meterIn) {
                showAlert('Please capture meter reading photo first!', 'error');
                return;
            }

            const submitBtn = document.getElementById('checkinSubmitBtn');
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<span class="loading"></span> Submitting...';

            try {
                const customRoute = document.getElementById('customRoutePlan').value.trim();
                const routePlan = customRoute || currentUser.routePlan;

                const payload = {
                    idToken: userCredential,
                    action: 'checkin',
                    payload: {
                        name: currentUser.displayName,
                        routePlan: routePlan,
                        meterInPhoto: capturedPhotos.meterIn
                    }
                };

                const response = await fetch(SCRIPT_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(payload)
                });

                const result = await response.json();

                if (result.status === 200) {
                    showAlert('‚úÖ Check-in successful!', 'success');
                    hideAllForms();
                    
                    // Reset form (‡§´‡•â‡§∞‡•ç‡§Æ ‡§∞‡•Ä‡§∏‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç)
                    document.getElementById('customRoutePlan').value = '';
                    capturedPhotos.meterIn = null;
                    document.getElementById('meterInPreview').classList.add('hidden');
                } else {
                    showAlert('Check-in failed: ' + result.message, 'error');
                }
            } catch (error) {
                showAlert('Check-in error: ' + error.message, 'error');
            } finally {
                submitBtn.disabled = false;
                submitBtn.innerHTML = 'Submit Check-in';
            }
        }

        /**
         * Submit check-out data (‡§ö‡•á‡§ï-‡§Ü‡§â‡§ü ‡§°‡•á‡§ü‡§æ ‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§ï‡§∞‡•á‡§Ç)
         */
        async function submitCheckout() {
            if (!transportMethod) {
                showAlert('Please select transportation method!', 'error');
                return;
            }

            if (transportMethod === 'local' && !capturedPhotos.meterOut) {
                showAlert('Please capture meter out reading photo!', 'error');
                return;
            }

            if (transportMethod === 'public' && !capturedPhotos.ticket) {
                showAlert('Please capture ticket photo!', 'error');
                return;
            }

            const submitBtn = document.getElementById('checkoutSubmitBtn');
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<span class="loading"></span> Submitting...';

            try {
                const payload = {
                    idToken: userCredential,
                    action: 'checkout',
                    payload: {
                        name: currentUser.displayName,
                        routePlan: currentUser.routePlan,
                        meterOutPhoto: capturedPhotos.meterOut || '',
                        ticketPhoto: capturedPhotos.ticket || '',
                        travelExpense: document.getElementById('travelExpense').value || 0,
                        foodExpense: document.getElementById('foodExpense').value || 0,
                        stayExpense: document.getElementById('stayExpense').value || 0,
                        otherExpense: document.getElementById('otherExpense').value || 0,
                        transportMethod: transportMethod
                    }
                };

                const response = await fetch(SCRIPT_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(payload)
                });

                const result = await response.json();

                if (result.status === 200) {
                    showAlert('‚úÖ Check-out successful!', 'success');
                    hideAllForms();
                    resetCheckoutForm();
                } else {
                    showAlert('Check-out failed: ' + result.message, 'error');
                }
            } catch (error) {
                showAlert('Check-out error: ' + error.message, 'error');
            } finally {
                submitBtn.disabled = false;
                submitBtn.innerHTML = 'Submit Check-out';
            }
        }

        /**
         * Reset checkout form (‡§ö‡•á‡§ï‡§Ü‡§â‡§ü ‡§´‡•â‡§∞‡•ç‡§Æ ‡§∞‡•Ä‡§∏‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç)
         */
        function resetCheckoutForm() {
            transportMethod = null;
            capturedPhotos.meterOut = null;
            capturedPhotos.ticket = null;
            
            document.getElementById('localTransport').classList.remove('selected');
            document.getElementById('publicTransport').classList.remove('selected');
            document.getElementById('localVehicleSection').classList.add('hidden');
            document.getElementById('publicTransportSection').classList.add('hidden');
            
            document.getElementById('meterOutPreview').classList.add('hidden');
            document.getElementById('ticketPreview').classList.add('hidden');
            
            // Reset expense fields (‡§ñ‡§∞‡•ç‡§ö ‡§ï‡•á ‡§´‡§º‡•Ä‡§≤‡•ç‡§° ‡§∞‡•Ä‡§∏‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç)
            document.getElementById('travelExpense').value = '';
            document.getElementById('foodExpense').value = '';
            document.getElementById('stayExpense').value = '';
            document.getElementById('otherExpense').value = '';
        }

        /**
         * Hide all forms (‡§∏‡§≠‡•Ä ‡§´‡•â‡§∞‡•ç‡§Æ ‡§õ‡•Å‡§™‡§æ‡§è‡§Ç)
         */
        function hideAllForms() {
            document.getElementById('checkinForm').classList.add('hidden');
            document.getElementById('checkoutForm').classList.add('hidden');
        }

        /**
         * Logout function (‡§≤‡•â‡§ó‡§Ü‡§â‡§ü ‡§´‡§º‡§Ç‡§ï‡•ç‡§∂‡§®)
         */
        function logout() {
            if (typeof google !== 'undefined') {
                google.accounts.id.disableAutoSelect();
            }
            
            currentUser = null;
            userCredential = null;
            capturedPhotos = {};
            
            document.getElementById('appSection').classList.add('hidden');
            document.getElementById('loginSection').classList.remove('hidden');
            
            hideAllForms();
            clearAlerts();
            
            showAlert('Logged out successfully', 'success');
        }

        /**
         * Show alert message (‡§Ö‡§≤‡§∞‡•ç‡§ü ‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§¶‡§ø‡§ñ‡§æ‡§è‡§Ç)
         */
        function showAlert(message, type = 'success') {
            const alertContainer = document.getElementById('alertContainer');
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert alert-${type}`;
            alertDiv.textContent = message;
            
            alertContainer.appendChild(alertDiv);
            
            // Auto remove after 5 seconds (5 ‡§∏‡•á‡§ï‡§Ç‡§° ‡§ï‡•á ‡§¨‡§æ‡§¶ ‡§∏‡•ç‡§µ‡§§‡§É ‡§π‡§ü‡§æ ‡§¶‡•á‡§Ç)
            setTimeout(() => {
                if (alertDiv.parentNode) {
                    alertDiv.parentNode.removeChild(alertDiv);
                }
            }, 5000);
        }

        /**
         * Clear all alerts (‡§∏‡§≠‡•Ä ‡§Ö‡§≤‡§∞‡•ç‡§ü ‡§∏‡§æ‡§´‡§º ‡§ï‡§∞‡•á‡§Ç)
         */
        function clearAlerts() {
            document.getElementById('alertContainer').innerHTML = '';
        }

        /**
         * Show loading state (‡§≤‡•ã‡§°‡§ø‡§Ç‡§ó ‡§∏‡•ç‡§•‡§ø‡§§‡§ø ‡§¶‡§ø‡§ñ‡§æ‡§è‡§Ç)
         */
        function showLoading(message = 'Loading...') {
            const alertContainer = document.getElementById('alertContainer');
            alertContainer.innerHTML = `
                <div class="alert" style="background: #e3f2fd; color: #1976d2; border: 1px solid #bbdefb;">
                    <span class="loading"></span> ${message}
                </div>
            `;
        }

        /**
         * Hide loading state (‡§≤‡•ã‡§°‡§ø‡§Ç‡§ó ‡§∏‡•ç‡§•‡§ø‡§§‡§ø ‡§õ‡•Å‡§™‡§æ‡§è‡§Ç)
         */
        function hideLoading() {
            const alerts = document.querySelectorAll('.alert');
            alerts.forEach(alert => {
                if (alert.textContent.includes('Loading') || alert.textContent.includes('Verifying')) {
                    alert.remove();
                }
            });
        }

        /**
         * Check if user is on mobile device (‡§ú‡§æ‡§Ç‡§ö‡•á‡§Ç ‡§ï‡§ø ‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§°‡§ø‡§µ‡§æ‡§á‡§∏ ‡§™‡§∞ ‡§π‡•à ‡§Ø‡§æ ‡§®‡§π‡•Ä‡§Ç)
         */
        function isMobileDevice() {
            return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        }

        /**
         * Initialize app on load (‡§≤‡•ã‡§° ‡§π‡•ã‡§®‡•á ‡§™‡§∞ ‡§ê‡§™ ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•á‡§Ç)
         */
        document.addEventListener('DOMContentLoaded', function() {
            // Add mobile-specific enhancements (‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤-‡§µ‡§ø‡§∂‡§ø‡§∑‡•ç‡§ü ‡§∏‡•Å‡§ß‡§æ‡§∞ ‡§ú‡•ã‡§°‡§º‡•á‡§Ç)
            if (isMobileDevice()) {
                document.body.style.fontSize = '16px';
            }

            // Add service worker for offline capability (optional) (‡§ë‡§´‡§º‡§≤‡§æ‡§á‡§® ‡§ï‡•ç‡§∑‡§Æ‡§§‡§æ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡§∞‡•ç‡§µ‡§ø‡§∏ ‡§µ‡§∞‡•ç‡§ï‡§∞ ‡§ú‡•ã‡§°‡§º‡•á‡§Ç (‡§µ‡•à‡§ï‡§≤‡•ç‡§™‡§ø‡§ï))
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('/sw.js').catch(function(error) {
                    console.log('Service Worker registration failed:', error);
                });
            }
        });

        // Prevent form submission on Enter key (mobile keyboards) (‡§è‡§Ç‡§ü‡§∞ ‡§ï‡•Å‡§Ç‡§ú‡•Ä ‡§™‡§∞ ‡§´‡•â‡§∞‡•ç‡§Æ ‡§∏‡§¨‡§Æ‡§ø‡§∂‡§® ‡§ï‡•ã ‡§∞‡•ã‡§ï‡•á‡§Ç (‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§ï‡•Ä‡§¨‡•ã‡§∞‡•ç‡§°))
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Enter' && event.target.tagName === 'INPUT') {
                event.preventDefault();
            }
        });
    </script>
</body>
</html>
